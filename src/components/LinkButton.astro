---
interface Props {
  /** URL to navigate to */
  href: string;

  /** Visual style */
  variant?: 'primary' | 'secondary' | 'highlight';

  /** Size preset */
  size?: 'small' | 'large';

  /** Stretch to container width */
  fullWidth?: boolean;

  /** Accessible label when visible text isnâ€™t descriptive */
  ariaLabel?: string;

  /** Target browsing context */
  target?: '_self' | '_blank' | '_parent' | '_top';

  /** Relationship hints for external links */
  rel?: string;

  /** Additional CSS classes */
  class?: string;
}


const {
  href,
  variant = 'primary',
  size = 'small',
  fullWidth = false,
  ariaLabel,
  target = '_self',
  rel,
  class: className = '',
} = Astro.props;

// Base styles for all link-buttons
// - inline-flex: better vertical alignment for icons + text
// - focus-visible: keyboard focus only, not on mouse click
const baseStyles =
  'btn inline-flex items-center justify-center font-opensans font-bold text-center rounded-[6px] transition-colors hover:shadow-sm ' +
  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-current focus-visible:ring-offset-2';

// Variant styles (your existing approach)
const variantStyles = {
  primary: 'btn-primary bg-charcoal border border-white/40 hover:bg-black/80',
  secondary: 'btn-secondary bg-transparent border border-charcoal hover:bg-white/50',
  highlight: 'btn-highlight bg-yellow border border-white hover:bg-accent-yellow',
} as const;

// Size styles
const sizeStyles = {
  small: 'text-[16px] py-[6px] px-6',
  large: 'text-[20px] py-[12px] px-8',
} as const;

// Full width
const widthStyle = fullWidth ? 'w-full' : '';

// If opening a new tab, ensure we include noopener/noreferrer for security.
// Let caller override via `rel` prop if they need to.
const normalizedTarget = target?.toLowerCase();
const computedRel =
  normalizedTarget === '_blank'
    ? (rel ? rel : 'noopener noreferrer')
    : rel;

const combinedStyles = [
  baseStyles,
  variantStyles[variant],
  sizeStyles[size],
  widthStyle,
  className,
]
  .filter(Boolean)
  .join(' ');
---

<a
  href={href}
  class={combinedStyles}
  target={target}
  rel={computedRel}
  aria-label={ariaLabel}
>
  <slot />
</a>
